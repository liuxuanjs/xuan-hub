## 概述
替换元素（Replaced Element）是指其内容不受CSS视觉格式化模型控制的元素，这些元素的内容是由外部资源决定的，CSS只能影响其位置，而不能影响其内部内容。

## 基本概念

### 什么是替换元素
替换元素的内容不是由CSS控制，而是由元素本身或外部资源决定：
- 元素的内容被"替换"为外部资源
- CSS只能控制其框模型属性（尺寸、边距、边框等）
- 内部内容的渲染由浏览器或插件处理

### 常见的替换元素
```html
<!-- 图片元素 -->
<img src="image.jpg" alt="图片">

<!-- 表单控件 -->
<input type="text" value="输入框">
<input type="checkbox">
<input type="radio">
<select><option>下拉框</option></select>
<textarea>文本域</textarea>

<!-- 媒体元素 -->
<video src="video.mp4"></video>
<audio src="audio.mp3"></audio>

<!-- 嵌入元素 -->
<embed src="plugin.swf">
<object data="document.pdf"></object>
<iframe src="page.html"></iframe>

<!-- 画布元素 -->
<canvas width="300" height="200"></canvas>
```

## 替换元素的特性

### 1. 内在尺寸（Intrinsic Dimensions）
替换元素具有自己的固有尺寸：
```css
img {
    /* 图片有原始宽高 */
    width: auto;  /* 显示原始宽度 */
    height: auto; /* 显示原始高度 */
}

video {
    /* 视频有原始尺寸 */
    width: 640px;  /* 可以修改显示尺寸 */
    height: 480px;
}
```

### 2. 可以设置宽高
与一般内联元素不同，替换元素可以设置宽高：
```css
/* 内联替换元素可以设置宽高 */
img {
    display: inline; /* 默认 */
    width: 200px;    /* 有效 */
    height: 150px;   /* 有效 */
}

/* 对比：普通内联元素 */
span {
    display: inline;
    width: 200px;    /* 无效 */
    height: 150px;   /* 无效 */
}
```

### 3. 垂直对齐
默认情况下，替换元素与文本基线对齐：
```css
img {
    vertical-align: baseline; /* 默认值 */
    vertical-align: top;      /* 可以修改对齐方式 */
    vertical-align: middle;
    vertical-align: bottom;
}
```

### 4. 盒模型表现
替换元素完全遵循CSS盒模型：
```css
img {
    width: 200px;
    height: 150px;
    padding: 10px;
    border: 5px solid #ccc;
    margin: 20px;
    box-sizing: border-box; /* 影响最终尺寸 */
}
```

## 非替换元素对比

### 非替换元素特征
```html
<!-- 非替换元素 -->
<div>块级元素</div>
<span>内联元素</span>
<p>段落元素</p>
<h1>标题元素</h1>
```

```css
/* 非替换元素的内容由CSS和HTML控制 */
div {
    content: "可以通过CSS content属性控制"; /* 仅伪元素有效 */
    color: red;        /* 控制文本颜色 */
    font-size: 16px;   /* 控制文本大小 */
    background: yellow; /* 控制背景 */
}
```

## 实际应用场景

### 1. 响应式图片
```css
.responsive-image {
    width: 100%;
    height: auto; /* 保持宽高比 */
    max-width: 500px;
    display: block;
    margin: 0 auto;
}

/* 对象适应 */
.cover-image {
    width: 300px;
    height: 200px;
    object-fit: cover;    /* 裁剪填充 */
    object-position: center; /* 对象位置 */
}
```

### 2. 表单元素样式
```css
/* 输入框 */
input[type="text"] {
    width: 100%;
    height: 40px;
    padding: 8px 12px;
    border: 2px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    box-sizing: border-box;
}

/* 下拉框 */
select {
    width: 200px;
    height: 36px;
    padding: 6px 12px;
    border: 1px solid #ccc;
    background: white;
    font-size: 14px;
}

/* 文本域 */
textarea {
    width: 100%;
    min-height: 100px;
    padding: 8px 12px;
    border: 2px solid #ddd;
    border-radius: 4px;
    resize: vertical; /* 只允许垂直调整大小 */
    font-family: inherit;
}
```

### 3. 媒体元素
```css
/* 视频 */
video {
    width: 100%;
    height: auto;
    max-width: 800px;
    background: #000;
}

/* 音频 */
audio {
    width: 100%;
    height: 40px;
}

/* iframe */
iframe {
    width: 100%;
    height: 400px;
    border: none;
    border-radius: 8px;
}
```

### 4. 画布元素
```css
canvas {
    width: 400px;
    height: 300px;
    border: 1px solid #ccc;
    background: #f9f9f9;
    display: block;
    margin: 20px auto;
}
```

## 特殊处理技巧

### 1. 图片垂直居中
```css
.image-container {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 300px;
    background: #f0f0f0;
}

.centered-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}
```

### 2. 表单元素统一样式
```css
/* 重置表单元素默认样式 */
input, select, textarea, button {
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    margin: 0;
    padding: 0;
    border: none;
    background: none;
    box-sizing: border-box;
}

/* 自定义样式 */
.form-control {
    display: block;
    width: 100%;
    height: 40px;
    padding: 8px 12px;
    border: 2px solid #e1e1e1;
    border-radius: 4px;
    background: white;
    transition: border-color 0.3s ease;
}

.form-control:focus {
    outline: none;
    border-color: #007bff;
}
```

### 3. 自适应视频
```css
.video-container {
    position: relative;
    width: 100%;
    height: 0;
    padding-bottom: 56.25%; /* 16:9 宽高比 */
}

.video-container video,
.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
```

## object-fit和object-position

### object-fit属性
```css
.fit-demo {
    width: 300px;
    height: 200px;
    border: 2px solid #ccc;
}

.fit-fill { object-fit: fill; }     /* 填充，可能变形 */
.fit-contain { object-fit: contain; } /* 包含，保持比例 */
.fit-cover { object-fit: cover; }    /* 覆盖，可能裁剪 */
.fit-none { object-fit: none; }      /* 原始大小 */
.fit-scale-down { object-fit: scale-down; } /* 缩小版本的none或contain */
```

### object-position属性
```css
.position-demo {
    width: 300px;
    height: 200px;
    object-fit: cover;
}

.pos-center { object-position: center; }        /* 默认 */
.pos-top { object-position: top; }              /* 顶部 */
.pos-left { object-position: left; }            /* 左侧 */
.pos-custom { object-position: 25% 75%; }       /* 自定义位置 */
.pos-pixel { object-position: 10px 20px; }      /* 像素值 */
```

## 浏览器兼容性

### 基本替换元素支持
- img, input, select, textarea: 所有浏览器
- video, audio: IE9+
- canvas: IE9+
- object-fit/object-position: Chrome 32+, Firefox 36+

### 兼容性处理
```css
/* object-fit polyfill */
.ie-object-fit {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* 条件注释 */
<!--[if IE]>
<style>
.modern-feature {
    /* IE特定样式 */
}
</style>
<![endif]-->
```

## 总结

替换元素的核心特点：

1. **内容由外部资源决定**，CSS无法控制内部内容
2. **可以设置宽高**，即使是内联替换元素
3. **具有内在尺寸**，有默认的显示大小
4. **遵循盒模型**，可以设置padding、border、margin
5. **支持垂直对齐**，默认基线对齐
6. **常见元素包括**：img、input、select、video、canvas等
7. **现代属性**：object-fit和object-position提供更好的控制

理解替换元素概念有助于：
- 更好地控制媒体元素的显示
- 正确处理表单元素的样式
- 解决图片和视频的布局问题
- 实现响应式媒体内容