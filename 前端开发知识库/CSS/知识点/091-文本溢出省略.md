## 概述
文本溢出省略是处理长文本显示的常用技术，通过CSS实现单行和多行文本的省略效果，提升页面布局的美观性。

## 单行文本省略

### 基本实现
```css
.single-line-ellipsis {
    width: 200px;           /* 必须有固定宽度 */
    white-space: nowrap;    /* 不换行 */
    overflow: hidden;       /* 隐藏溢出 */
    text-overflow: ellipsis; /* 显示省略号 */
}
```

### 完整示例
```css
.text-ellipsis {
    max-width: 300px;       /* 或使用max-width */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;         /* 确保是块级元素 */
}
```

## 多行文本省略

### Webkit方案（推荐）
```css
.multi-line-ellipsis {
    display: -webkit-box;
    -webkit-line-clamp: 3;      /* 显示3行 */
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}
```

### 兼容性方案
```css
.multi-line-fallback {
    max-height: 4.5em;          /* 3行的高度 */
    line-height: 1.5em;
    overflow: hidden;
    position: relative;
}

.multi-line-fallback::after {
    content: '...';
    position: absolute;
    bottom: 0;
    right: 0;
    background: white;
    padding-left: 20px;
}
```

## 实际应用场景

### 1. 卡片标题
```css
.card-title {
    font-size: 18px;
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 10px;
}
```

### 2. 文章摘要
```css
.article-excerpt {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-height: 1.6;
    color: #666;
}
```

### 3. 导航菜单
```css
.nav-item {
    max-width: 120px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 10px 15px;
}
```

### 4. 表格单元格
```css
.table-cell {
    max-width: 200px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* 支持点击展开 */
.table-cell:hover {
    white-space: normal;
    max-width: none;
}
```

### 5. 文件名显示
```css
.filename {
    max-width: 250px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-family: monospace;
}
```

## 响应式省略

### 媒体查询控制
```css
.responsive-ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 300px;
}

@media (max-width: 768px) {
    .responsive-ellipsis {
        max-width: 200px;   /* 移动端更短 */
    }
}
```

### 容器宽度自适应
```css
.flex-ellipsis {
    display: flex;
    align-items: center;
}

.flex-ellipsis-text {
    flex: 1;
    min-width: 0;           /* 关键：允许收缩 */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
```

## 高级技巧

### 1. 自定义省略符号
```css
.custom-ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: '▶'; /* 自定义省略符号 */
}
```

### 2. 渐变遮罩效果  
```css
.fade-ellipsis {
    position: relative;
    max-height: 3.6em;      /* 3行高度 */
    overflow: hidden;
}

.fade-ellipsis::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 50px;
    height: 1.2em;
    background: linear-gradient(to right, transparent, white);
}
```

### 3. 展开/收起功能
```css
.expandable-text {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    transition: all 0.3s ease;
}

.expandable-text.expanded {
    -webkit-line-clamp: unset;
    max-height: none;
}
```

```javascript
function toggleText(element) {
    element.classList.toggle('expanded');
}
```

### 4. 工具提示完整文本
```css
.tooltip-ellipsis {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: help;
}

.tooltip-ellipsis[title]:hover::after {
    content: attr(title);
    position: absolute;
    background: #333;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    white-space: normal;
    z-index: 1000;
}
```

## 常见问题解决

### 1. Flexbox中的省略
```css
.flex-container {
    display: flex;
    width: 300px;
}

.flex-item {
    flex: 1;
    min-width: 0;           /* 重要：允许收缩到内容以下 */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
```

### 2. 内联元素省略
```css
/* 问题：内联元素无法设置宽度 */
span.ellipsis {
    display: inline-block;  /* 改为内联块 */
    max-width: 200px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: top;    /* 对齐调整 */
}
```

### 3. 多行省略兼容性
```css
/* 现代浏览器 */
.multi-ellipsis {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* 降级方案 */
@supports not (-webkit-line-clamp: 2) {
    .multi-ellipsis {
        max-height: 3em;
        position: relative;
    }
    
    .multi-ellipsis::after {
        content: '...';
        position: absolute;
        bottom: 0;
        right: 0;
        background: inherit;
    }
}
```

## JavaScript增强

### 检测文本是否溢出
```javascript
function isOverflowing(element) {
    return element.scrollWidth > element.clientWidth;
}

// 只对溢出的元素添加省略
if (isOverflowing(textElement)) {
    textElement.classList.add('text-ellipsis');
}
```

### 动态行数控制
```javascript
function setLineClamp(element, lines) {
    element.style.webkitLineClamp = lines;
    element.style.maxHeight = `${lines * 1.4}em`;
}
```

## 浏览器兼容性

### 单行省略
- text-overflow: ellipsis：IE6+
- 所有现代浏览器完全支持

### 多行省略
- -webkit-line-clamp：Chrome, Safari, Firefox 68+
- IE需要JavaScript或伪元素方案

### 兼容性检测
```css
@supports (-webkit-line-clamp: 2) {
    .multi-line {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
}
```

## 总结

文本溢出省略的要点：

1. **单行省略**：width + nowrap + overflow + text-overflow
2. **多行省略**：-webkit-line-clamp（现代浏览器）
3. **Flexbox注意**：设置min-width: 0
4. **响应式设计**：配合媒体查询调整
5. **用户体验**：考虑添加展开功能
6. **兼容性处理**：提供降级方案

掌握文本省略技术能够有效处理长文本显示问题，提升界面整洁度。